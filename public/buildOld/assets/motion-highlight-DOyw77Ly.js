import{r as i,j as o}from"./app-B9AQd5ys.js";import{c as v}from"./utils-CBfrqCZ4.js";import{A as $}from"./index-WOW4SexN.js";import{m as T}from"./proxy-BNapONv9.js";/* empty css            */const J=i.createContext(void 0);function K(){const g=i.useContext(J);if(!g)throw new Error("useMotionHighlight must be used within a MotionHighlightProvider");return g}function tt({ref:g,...n}){const{children:p,value:c,defaultValue:x,onValueChange:V,className:y,transition:u={type:"spring",stiffness:350,damping:35},hover:H=!1,enabled:R=!0,controlledItems:A,disabled:k=!1,exitDelay:I=.2,mode:h="children"}=n,f=i.useRef(null);i.useImperativeHandle(g,()=>f.current);const[s,C]=i.useState(c??x??null),[a,z]=i.useState(null),[S,D]=i.useState(""),L=i.useCallback(e=>{C(t=>t===e?t:e),e!==s&&V?.(e)},[s,V]),N=i.useCallback(e=>{if(!f.current)return;const t=n?.boundsOffset??{top:0,left:0,width:0,height:0},l=f.current.getBoundingClientRect(),r={top:e.top-l.top+(t.top??0),left:e.left-l.left+(t.left??0),width:e.width+(t.width??0),height:e.height+(t.height??0)};z(d=>d&&d.top===r.top&&d.left===r.left&&d.width===r.width&&d.height===r.height?d:r)},[n]),O=i.useCallback(()=>{z(e=>e===null?e:null)},[]);i.useEffect(()=>{c!==void 0?C(c):x!==void 0&&C(x)},[c,x]);const F=i.useId();i.useEffect(()=>{if(h!=="parent")return;const e=f.current;if(!e)return;const t=()=>{if(!s)return;const l=e.querySelector(`[data-value="${s}"][data-highlight="true"]`);l&&N(l.getBoundingClientRect())};return e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)},[h,s,N]);const M=i.useCallback(e=>h==="parent"?o.jsxs("div",{ref:f,"data-slot":"motion-highlight-container",className:v("relative",n?.containerClassName),children:[o.jsx($,{initial:!1,children:a&&o.jsx(T.div,{"data-slot":"motion-highlight",animate:{top:a.top,left:a.left,width:a.width,height:a.height,opacity:1},initial:{top:a.top,left:a.left,width:a.width,height:a.height,opacity:0},exit:{opacity:0,transition:{...u,delay:(u?.delay??0)+(I??0)}},transition:u,className:v("absolute bg-muted z-0",y,S)})}),e]}):e,[h,n,a,u,I,y,S]);return o.jsx(J.Provider,{value:{mode:h,activeValue:s,setActiveValue:L,id:F,hover:H,className:y,transition:u,disabled:k,enabled:R,exitDelay:I,setBounds:N,clearBounds:O,activeClassName:S,setActiveClassName:D,forceUpdateBounds:n?.forceUpdateBounds},children:R?M(A?p:i.Children.map(p,(e,t)=>o.jsx(Q,{className:n?.itemsClassName,children:e},t))):p})}function U(g,n){return Object.keys(n).reduce((p,c)=>(g.props[c]===void 0&&(p[c]=n[c]),p),{})}function Q({ref:g,children:n,id:p,value:c,className:x,transition:V,disabled:y=!1,activeClassName:u,exitDelay:H,asChild:R=!1,forceUpdateBounds:A,...k}){const I=i.useId(),{activeValue:h,setActiveValue:f,mode:s,setBounds:C,clearBounds:a,hover:z,enabled:S,className:D,transition:L,id:N,disabled:O,exitDelay:F,forceUpdateBounds:M,setActiveClassName:e}=K(),t=n,l=p??c??t.props?.["data-value"]??t.props?.id??I,r=h===l,d=y===void 0?O:y,w=V??L,E=i.useRef(null);if(i.useImperativeHandle(g,()=>E.current),i.useEffect(()=>{if(s!=="parent")return;let m,j=null;const G=A===!0||M&&A!==!1,P=()=>{if(!E.current)return;const B=E.current.getBoundingClientRect();if(G){if(j&&j.top===B.top&&j.left===B.left&&j.width===B.width&&j.height===B.height){m=requestAnimationFrame(P);return}j=B,m=requestAnimationFrame(P)}C(B)};if(r?(P(),e(u??"")):h||a(),G)return()=>cancelAnimationFrame(m)},[s,r,h,C,a,u,e,A,M]),!i.isValidElement(n))return n;const b={"data-active":r?"true":"false","aria-selected":r,"data-disabled":d,"data-value":l,"data-highlight":!0},q=z?{onMouseEnter:m=>{f(l),t.props.onMouseEnter?.(m)},onMouseLeave:m=>{f(null),t.props.onMouseLeave?.(m)}}:{onClick:m=>{f(l),t.props.onClick?.(m)}};return R?s==="children"?i.cloneElement(t,{key:l,ref:E,className:v("relative",t.props.className),...U(t,{...b,"data-slot":"motion-highlight-item-container"}),...q,...k},o.jsxs(o.Fragment,{children:[o.jsx($,{initial:!1,children:r&&!d&&o.jsx(T.div,{layoutId:`transition-background-${N}`,"data-slot":"motion-highlight",className:v("absolute inset-0 bg-muted z-0",D,u),transition:w,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{...w,delay:(w?.delay??0)+(H??F??0)}},...b})}),o.jsx("div",{"data-slot":"motion-highlight-item",className:v("relative z-[1]",x),...b,children:n})]})):i.cloneElement(t,{ref:E,...U(t,{...b,"data-slot":"motion-highlight-item"}),...q}):S?o.jsxs("div",{ref:E,"data-slot":"motion-highlight-item-container",className:v(s==="children"&&"relative",x),...b,...k,...q,children:[s==="children"&&o.jsx($,{initial:!1,children:r&&!d&&o.jsx(T.div,{layoutId:`transition-background-${N}`,"data-slot":"motion-highlight",className:v("absolute inset-0 bg-muted z-0",D,u),transition:w,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{...w,delay:(w?.delay??0)+(H??F??0)}},...b})}),i.cloneElement(t,{className:v("relative z-[1]",t.props.className),...U(t,{...b,"data-slot":"motion-highlight-item"})})]},l):n}export{tt as MotionHighlight,Q as MotionHighlightItem,K as useMotionHighlight};
