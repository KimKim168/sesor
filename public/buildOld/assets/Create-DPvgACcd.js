import{j as e,r as x,u as I,a as _}from"./app-B9AQd5ys.js";import{A as z,P as D,S as L}from"./SubmitButton-DkUfTc5D.js";import{A as T,F as V}from"./FormField-C5HLT0r3.js";import{F as G}from"./FormLabel-BVEwy9q1.js";import{c as j}from"./utils-CBfrqCZ4.js";import{C as b,a as k}from"./index-CZxAM9gV.js";import{C as N}from"./circle-check-CPlGWBE5.js";import{c as v}from"./createLucideIcon-CEUCJa7Y.js";import{S as O}from"./square-pen-CVOYkyvl.js";import{P as R}from"./plus-DnrjCfYt.js";import{A as U}from"./app-layout-CnYGSqSs.js";/* empty css            */import"./index-DGr2TLfR.js";import"./index-pUzHIrlx.js";import"./index-swU0BSPm.js";import"./button-EpALpkJz.js";import"./info-CH5uYkAE.js";import"./x-3TRNNdyt.js";import"./triangle-alert-C9A1hioe.js";import"./circle-check-big-CG4Sxlae.js";import"./use-translation-Bes2uPNF.js";import"./loader-circle-boOoTV2o.js";import"./input-C9w9P4L6.js";import"./label-C0F9iVr4.js";import"./index-1DDNbJHx.js";import"./index-C4Ptd6V1.js";import"./index-_TP5U3zn.js";import"./index-DKMsqORC.js";import"./index-BOj2oOoE.js";import"./index-DbduvR8q.js";import"./loader-DIKUI-My.js";import"./sheet-DdM45rFk.js";import"./index-BRlx25e-.js";import"./index-DMVBB7S5.js";import"./index-C6zGpFsQ.js";import"./index-DlpLYDZ1.js";import"./tooltip-C7Swj_Cy.js";import"./index-DTexlEPQ.js";import"./index-DXtQc_U7.js";import"./collapsible-CWObRoGu.js";import"./index-CM268rNH.js";import"./use-permission-1-Kk-MoW.js";import"./chevron-down-bb3v8jkC.js";import"./dropdown-menu-ChJ0oRXq.js";import"./index-CnQi-Tu5.js";import"./index-vyCFQFol.js";import"./index-Z3JRHEkw.js";import"./avatar-Cv_iQLGP.js";import"./use-initials-H4qxnzxA.js";import"./index-BPuO6ew5.js";import"./index-CMWG4mbA.js";import"./chevrons-up-down-KClQ2Vfg.js";import"./app-logo-icon-T2T-wNYo.js";import"./layout-list-BM-QY9No.js";import"./users-DwCWCooa.js";import"./book-open-D6ywPU7Z.js";import"./breadcrumb-D-MR7w5c.js";import"./chevron-right-6vQtaiep.js";import"./NavLanguage-ClSNos7V.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$=v("Eye",W);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],B=v("Trash",q),H={create:R,view:$,update:O,delete:B},J=({title:m,permissions:o,selected:t,onToggle:d,onSelectAll:h})=>{const c=o.length>0&&o.every(i=>t.includes(i.id));return e.jsxs("div",{className:"rounded-lg border-[1px] border-border p-4 ring-primary/20 transition-all duration-300 hover:border-primary hover:ring-4 dark:border-primary/50 dark:hover:border-primary",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:m.replace(/[_-]+/g," ").replace(/\b\w/g,i=>i.toUpperCase())}),o.length>0&&e.jsxs(b,{checked:c,onCheckedChange:()=>h(o),className:j("relative flex cursor-pointer items-center gap-2 rounded px-4 py-2 text-sm text-muted-foreground ring-[1px] ring-border transition-all data-[state=checked]:text-primary data-[state=checked]:ring-2 data-[state=checked]:ring-primary"),children:[e.jsx("span",{children:"Select All"}),e.jsx(k,{className:"absolute -top-2 -right-2 border-none",children:e.jsx(N,{className:"size-5 fill-primary text-primary-foreground"})})]})]}),o.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(i=>e.jsxs(b,{checked:t.includes(i.id),onCheckedChange:()=>d(i.id),className:j("relative cursor-pointer rounded px-2 py-3 text-center text-muted-foreground ring-[1px] ring-border data-[state=checked]:text-primary data-[state=checked]:ring-2 data-[state=checked]:ring-primary"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[(()=>{const u=i.name.split(" ").slice(-1)[0].toLowerCase(),l=H[u];return l?e.jsx(l,{className:"size-4"}):null})(),e.jsx("span",{className:"font-medium tracking-tight",children:i.name.split(" ").slice(-1)[0]})]}),e.jsx(k,{className:"absolute top-0 right-0",children:e.jsx(N,{className:"size-5 fill-primary text-primary-foreground"})})]},i.id))}):e.jsx("p",{className:"text-sm text-gray-400 italic",children:"No permissions in this group"})]})};function er(){const[m,o]=x.useState({message:"",type:"message"}),{editData:t,readOnly:d,permissions:h}=I().props,{data:c,setData:i,post:u,put:l,progress:y,processing:S,transform:C,reset:P,errors:g}=_({name:"",permissions:[]}),[f,p]=x.useState(c.permissions);x.useEffect(()=>{t?.name&&i("name",t?.name),t?.permissions&&i("permissions",t?.permissions?.map(r=>r.id)),t?.permissions&&p(t.permissions.map(r=>r.id))},[t]);const A=r=>{p(s=>s.includes(r)?s.filter(n=>n!==r):[...s,r])},F=r=>{const s=r.map(a=>a.id),n=s.every(a=>f.includes(a));p(a=>n?a.filter(E=>!s.includes(E)):[...new Set([...a,...s])])},M=r=>{r.preventDefault(),C(()=>({...c,permissions:f})),t?.id?l(`/admin/roles/${t.id}`,{preserveScroll:!1,onSuccess:s=>{s.props.flash?.success&&o({message:s.props.flash?.success,type:"success"})}}):u("/admin/roles",{preserveScroll:!1,onSuccess:s=>{P(),p([]),s.props.flash?.success&&o({message:s.props.flash?.success,type:"success"})}})},w=[{title:"Dashboard",href:"/dashboard"},{title:"Users",href:"/admin/users"},{title:"Roles",href:"/admin/roles"},{title:t?.name||"Create",href:"#"}];return e.jsx(U,{breadcrumbs:w,children:e.jsxs("form",{onSubmit:M,className:"form",children:[e.jsx(z,{type:m.type,flashMessage:m.message,setFlashMessage:o},m.message),g&&e.jsx(T,{title:"Please fix the following errors",errors:g}),e.jsx("div",{className:"form-field-container",children:e.jsx(V,{id:"name",name:"name",label:"Name",value:c.name,onChange:r=>i("name",r),error:g.name})}),e.jsx(G,{label:"Permissions"}),e.jsx("div",{className:"mt-1 mb-6 grid gap-4 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(h).map(([r,s],n)=>e.jsx(J,{title:r,permissions:s,selected:f,onToggle:A,onSelectAll:F},n))}),y&&e.jsx(D,{value:y.percentage,position:"start"}),!d&&e.jsx(L,{processing:S})]})})}export{er as default};
